# Project Brief: React 캘린더 - 반복 일정 기능 TDD 구현

## Executive Summary

기존 React 캘린더 애플리케이션에 반복 일정 기능을 TDD(테스트 주도 개발) 방식으로 추가하는 프로젝트입니다. 이 프로젝트는 실제 프로젝트에서 마주할 수 있는 복잡한 요구사항을 테스트 우선으로 구현하는 능력을 기르는 것을 목표로 합니다.

**핵심 문제**: 서버팀이 반복 일정 로직을 구현하지 않고 단순 CRUD API만 제공한 상황에서 프론트엔드에서 복잡한 반복 일정 로직을 안전하게 구현해야 함  
**해결 방안**: TDD 방식을 통한 점진적 기능 개발로 안정성과 품질 확보  
**핵심 가치**: 테스트 우선 개발, 안전한 리팩토링, 코드 품질

## Problem Statement

### 현재 상황
- 기존 일정 관리 애플리케이션은 기본적인 CRUD 기능만 구현된 상태
- 서버팀에서 반복 일정 로직을 구현하지 않고 휴가를 간 상황 🤬
- 서버에서는 이벤트 리스트에 대한 기본 CUD API(`/api/events-list`)만 제공
- 복잡한 반복 일정 로직을 프론트엔드에서 모두 처리해야 하는 상황

### 문제의 복잡성
- **날짜 계산의 복잡성**: 31일 매월 반복, 윤년 29일 매년 반복 등의 엣지 케이스
- **데이터 일관성**: 반복 일정 생성/수정/삭제 시 데이터 무결성 보장
- **성능 고려사항**: 대량의 반복 일정 생성 시 효율적인 처리
- **UI/UX 복잡도**: 반복 일정의 시각적 구분과 직관적인 편집 경험

### 해결의 시급성
과제 마감일까지 안정적이고 테스트 가능한 반복 일정 기능을 구현해야 하며, TDD 방식을 통해 코드 품질을 보장해야 합니다.

## Proposed Solution

### 핵심 접근법
TDD(Test-Driven Development) 방식을 활용하여 반복 일정 기능을 점진적으로 구현합니다.

**TDD 사이클**:
1. **Red**: 실패하는 테스트 작성
2. **Green**: 테스트를 통과하는 최소한의 코드 작성  
3. **Refactor**: 코드 품질 개선

### 기술적 전략
- **클라이언트 사이드 로직**: 반복 일정 생성/계산 로직을 프론트엔드에서 처리
- **API 활용**: 서버의 `/api/events-list` 엔드포인트를 통한 배치 처리
- **데이터 구조 확장**: 기존 Event 타입에 `repeat.id` 필드 추가로 반복 그룹 관리
- **점진적 구현**: 필수 요구사항부터 단계별로 구현

### 성공 요인
- 체계적인 테스트 작성으로 복잡한 날짜 로직의 안정성 확보
- 기존 코드베이스와의 호환성 유지
- 명확한 요구사항 분석을 통한 구현 범위 설정

## Target Users

### Primary User: 개발자 (학습자)
**프로필**: TDD 방식을 학습하고 실무에 적용하려는 프론트엔드 개발자  
**현재 상황**: 기본적인 React 개발 경험은 있으나 TDD 방식은 미숙함  
**학습 목표**:
- TDD 프로세스에 대한 실무적 이해
- 복잡한 비즈니스 로직을 테스트로 검증하는 능력
- 리팩토링을 통한 코드 품질 개선 경험

### Secondary User: 최종 사용자 (캘린더 사용자)
**프로필**: 반복적인 일정을 관리해야 하는 개인/업무 사용자  
**니즈**: 
- 매일/매주/매월/매년 반복되는 일정의 효율적 관리
- 반복 일정의 시각적 구분 및 개별 편집
- 안정적이고 예측 가능한 반복 일정 동작

## Goals & Success Metrics

### Learning Objectives (Primary)
- **TDD 프로세스 준수율**: 모든 신규 기능에 대해 테스트 우선 작성 100%
- **테스트 커버리지**: 반복 일정 관련 로직 90% 이상
- **리팩토링 횟수**: 각 기능 구현 후 최소 1회 이상 코드 개선

### Technical Success Metrics
- **테스트 통과율**: 모든 테스트 100% 통과
- **기능 완성도**: 필수 요구사항 5개 모두 구현
- **코드 품질**: ESLint, TypeScript 에러 0개

### User Experience Metrics
- **반복 일정 생성 성공률**: 95% 이상
- **UI 반응성**: 사용자 액션 후 100ms 이내 피드백
- **데이터 일관성**: 반복 일정 조작 후 데이터 무결성 100% 유지

## MVP Scope

### Core Features (Must Have) - 필수 요구사항
1. **반복 유형 선택**
   - 매일/매주/매월/매년 반복 타입 지원
   - 엣지 케이스: 31일 매월, 윤년 29일 매년 처리

2. **반복 일정 시각적 구분**
   - 캘린더 뷰에서 반복 일정 아이콘 표시
   - 일반 일정과의 명확한 구분

3. **반복 종료 조건**
   - 특정 날짜까지 반복 설정
   - 최대 2025-10-30까지 제한

4. **반복 일정 단일 수정**
   - 반복 일정 수정 시 단일 일정으로 변경
   - 반복 아이콘 제거

5. **반복 일정 단일 삭제**
   - 특정 반복 일정만 개별 삭제
   - 나머지 반복 일정은 유지

### Out of Scope for MVP
- 반복 간격 설정 (2일마다, 3주마다 등)
- 예외 날짜 처리
- 요일 지정 (주간 반복)
- 월간 반복 고급 옵션
- 반복 일정 전체 수정/삭제

### MVP Success Criteria
사용자가 반복 일정을 생성하고, 캘린더에서 시각적으로 구분하며, 개별 수정/삭제를 성공적으로 수행할 수 있어야 함. 모든 동작이 테스트로 검증되어야 함.

## Post-MVP Vision

### Phase 2 Features (선택 과제)
- **반복 간격 설정**: 커스텀 간격 지원 (최대 10회 제한)
- **예외 날짜 처리**: 특정 날짜 제외/수정 기능
- **고급 반복 옵션**: 요일 지정, 월간 고급 설정
- **반복 일정 전체 관리**: 전체 수정/삭제 기능

### Long-term Vision
TDD 방식으로 구축된 견고한 반복 일정 시스템을 바탕으로 더 복잡한 스케줄링 기능 (자동 스케줄링, 충돌 회피 등) 추가

## Technical Considerations

### Architecture Requirements
- **기존 구조 유지**: 현재 커스텀 훅 아키텍처 확장
- **타입 안전성**: TypeScript를 통한 엄격한 타입 체크
- **테스트 환경**: MSW + Vitest를 활용한 통합 테스트

### Implementation Strategy
```typescript
// 확장할 주요 컴포넌트들
- useEventOperations: 반복 일정 CRUD 로직
- EventForm: 반복 설정 UI
- CalendarView: 반복 일정 시각화
- Event 타입: repeat.id 필드 추가
```

### API Integration
```javascript
// 활용할 서버 엔드포인트
POST /api/events-list   // 반복 일정 일괄 생성
PUT  /api/events-list   // 반복 일정 일괄 수정  
DELETE /api/events-list // 반복 일정 일괄 삭제
```

### Testing Strategy
- **Unit Tests**: 날짜 계산 유틸리티 함수들
- **Integration Tests**: 훅의 반복 일정 처리 로직
- **E2E Tests**: 사용자 워크플로우 전체

## Constraints & Assumptions

### Technical Constraints
- **서버 제약**: 반복 로직 없이 단순 CRUD API만 제공
- **날짜 제한**: 반복 일정 최대 2025-10-30까지
- **브라우저 지원**: 모던 브라우저의 Date API 활용

### Timeline Constraints
- **과제 마감**: 정해진 기간 내 필수 요구사항 완료
- **TDD 준수**: 모든 기능을 테스트 우선으로 개발해야 하므로 개발 시간 증가

### Key Assumptions
- 기존 코드베이스의 아키텍처가 확장 가능함
- MSW를 통한 API 모킹이 실제 서버 동작과 일치함
- 사용자가 복잡한 반복 패턴보다는 기본적인 반복을 주로 사용함
- TDD 방식이 초기 개발 속도는 느리지만 장기적으로는 유리함

## Risks & Open Questions

### Key Risks
- **날짜 계산 복잡성**: 윤년, 월말일 처리 등의 엣지 케이스 버그 위험
- **성능 리스크**: 대량 반복 일정 생성 시 브라우저 성능 저하
- **데이터 일관성**: 반복 일정 수정/삭제 시 데이터 무결성 위험
- **TDD 학습 곡선**: TDD 미숙으로 인한 개발 지연 위험

### Open Questions
- 반복 일정의 최적 데이터 구조는 무엇인가?
- 클라이언트 사이드에서 대량 일정 생성의 성능 한계는?
- 사용자가 실제로 필요로 하는 반복 패턴의 우선순위는?
- 테스트 작성 시간과 구현 시간의 적절한 비율은?

### Areas Needing Further Research
- 다른 캘린더 애플리케이션의 반복 일정 UX 패턴 분석
- 날짜 라이브러리 (date-fns, moment.js) 도입 여부 검토
- 반복 일정의 효율적인 저장 및 조회 방식 연구

## Next Steps

### Immediate Actions - TDD 프로세스 시작
1. **환경 설정**
   - 기존 테스트 환경 점검 및 반복 일정 테스트 구조 설계
   - server.js를 제공된 코드로 교체 및 테스트

2. **첫 번째 TDD 사이클: 반복 유형 선택**
   - 실패하는 테스트: 반복 유형 UI 렌더링 테스트
   - 구현: EventForm에 반복 설정 UI 추가
   - 리팩토링: 코드 정리 및 타입 정의

3. **두 번째 TDD 사이클: 반복 일정 생성**
   - 실패하는 테스트: 매일 반복 일정 생성 테스트
   - 구현: useEventOperations에 반복 일정 로직 추가
   - 리팩토링: 날짜 계산 유틸리티 함수 분리

4. **순차적 기능 구현**
   - 각 필수 요구사항을 Red-Green-Refactor 사이클로 구현
   - 매 단계마다 테스트 실행 및 품질 검증

5. **통합 및 검증**
   - 전체 시나리오 통합 테스트
   - 코드 품질 최종 검토 (ESLint, TypeScript)

### Success Validation Checklist
- [ ] 모든 테스트 통과
- [ ] 필수 요구사항 5개 모두 구현
- [ ] TDD 프로세스 문서화
- [ ] 리팩토링 내역 정리
- [ ] 코드 품질 지표 달성

이 프로젝트는 **학습 중심의 TDD 실습**과 **실용적인 기능 구현**을 동시에 달성하는 것을 목표로 합니다.